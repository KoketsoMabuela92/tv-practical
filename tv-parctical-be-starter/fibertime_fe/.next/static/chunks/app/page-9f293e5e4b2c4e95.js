(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5491:(e,s,n)=>{Promise.resolve().then(n.bind(n,3356))},3356:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>p});var c=n(5155),i=n(2115);let t={RequestOTP:function(e){return new Promise(s=>{fetch("api/auth/request-otp",{method:"post",headers:[["Content-Type","application/json"]],body:JSON.stringify({cell_number:e})}).then(e=>{e.json().then(e=>{s(e)})})})},Login:function(e,s){return new Promise(n=>{fetch("api/auth/login",{method:"post",headers:[["Content-Type","application/json"]],body:JSON.stringify({cell_number:e,otp:s})}).then(e=>{e.json().then(e=>{n(e)})})})}};function a(e){let{setPage:s,setCellNumber:n}=e,[a,r]=(0,i.useState)(""),[d,o]=(0,i.useState)(!1);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"fibetime-title",children:["fibertime",(0,c.jsx)("small",{children:"™"})]}),(0,c.jsx)("div",{className:"heading",children:"Log in to connect to WiFi"}),(0,c.jsx)("div",{className:"subtext",children:"Enter your phone number below:"}),(0,c.jsx)("div",{className:"cell-container",children:(0,c.jsx)("input",{onChange:e=>{r(e.currentTarget.value.substring(0,10))},onKeyDown:e=>{-1==["Backspace","Delete","0","1","2","3","4","5","6","7","8","9"].indexOf(e.key)&&e.preventDefault()},placeholder:"082 345 6789",type:"tel",value:a,disabled:d})}),(0,c.jsx)("a",{onClick:()=>{!(a.length<10)&&(d||(o(!0),t.RequestOTP(a).then(e=>{n(a),s("otp")})))},className:"next-button",children:(0,c.jsx)("div",{children:"Next"})})]})}function r(e){let{setPage:s,cellNumber:n}=e,[a,r]=(0,i.useState)(""),[d,o]=(0,i.useState)(!1);return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"container",children:[(0,c.jsx)("div",{className:"heading",children:"Enter the otp to login"}),(0,c.jsx)("div",{className:"code-container",children:[0,1,2,3].map(e=>{var i;return(0,c.jsx)("input",{disabled:d,value:null!==(i=a[e])&&void 0!==i?i:"",id:"i".concat(e),onKeyDown:c=>{if(-1==["Backspace","Delete","0","1","2","3","4","5","6","7","8","9"].indexOf(c.key))c.preventDefault();else if(["Backspace","Delete"].indexOf(c.key)>-1){let s=a.split("");s.splice(e-1,1),r(s.join(""));let n=document.querySelector("input#i".concat(e-1));n&&n.focus()}else{let i=a+c.key;r(i);let d=document.querySelector("input#i".concat(e+1));d&&d.focus(),4===i.length&&(o(!0),t.Login(n,i).then(e=>{e.success&&(localStorage.setItem("token",e.token),s("tv-code")),o(!1)}))}},className:"code",placeholder:"0"},e)})}),(0,c.jsx)("div",{className:"subtext",children:"Help, I can‘t find my code:"})]})})}n(6563),n(4071),n(7984);var d=n(4412);function o(e){let{setPage:s,setDeviceId:n}=e,[t,a]=(0,i.useState)(""),[r,o]=(0,i.useState)(!1);return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"container",children:[(0,c.jsx)("div",{className:"heading",children:"Enter the four digit code on your TV or device screen"}),(0,c.jsx)("div",{className:"code-container",children:[0,1,2,3].map(e=>{var i;return(0,c.jsx)("input",{disabled:r,value:null!==(i=t[e])&&void 0!==i?i:"",id:"i".concat(e),onKeyDown:c=>{if(-1==["Backspace","Delete",..."0123456789abcdefghijklmnopqrstuvwxyz".split("")].indexOf(c.key))c.preventDefault();else if(["Backspace","Delete"].indexOf(c.key)>-1){let s=t.split("");s.splice(e-1,1),a(s.join(""));let n=document.querySelector("input#i".concat(e-1));n&&n.focus()}else{let i=(t+c.key).toUpperCase();a(i);let r=document.querySelector("input#i".concat(e+1));r&&r.focus(),4===i.length&&(o(!0),d.A.getDevice(i).then(e=>{e.success&&(n(e.device.id),s("connecting")),o(!1)}))}},className:"code",placeholder:"0"},e)})}),(0,c.jsx)("div",{className:"subtext",children:"Help, I can‘t find my code:"})]})})}function l(e){let{setPage:s,deviceId:n}=e;return(0,i.useEffect)(()=>{d.A.connectDevice(n).then(e=>{e.success&&s("connected")})}),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"heading",children:"Connecting..."}),(0,c.jsxs)("div",{className:"progress-container",children:[(0,c.jsx)("img",{className:"p-icon",src:"/tvi.png"}),(0,c.jsx)("img",{className:"p-icon",src:"/more.png"}),(0,c.jsx)("img",{className:"p-icon",src:"/wi-fi-icon.png"}),(0,c.jsx)("img",{className:"p-icon",src:"/more.png"}),(0,c.jsx)("img",{className:"p-icon",src:"/internet.png"})]}),(0,c.jsxs)("div",{className:"bundle-container",children:[(0,c.jsxs)("div",{className:"bundle-info",children:[(0,c.jsx)("img",{className:"icon",src:"/wi-fi-icon.png"}),(0,c.jsx)("div",{className:"devices",children:"1"}),(0,c.jsx)("img",{className:"devices-icon",src:"/tvi.png"}),(0,c.jsx)("div",{className:"product-name",children:"30 days"})]}),(0,c.jsxs)("div",{className:"device-card",children:[(0,c.jsx)("img",{className:"device-icon",src:"/tvi.png"}),(0,c.jsxs)("div",{className:"device-details",children:[(0,c.jsx)("div",{className:"device-name",children:"Device"}),(0,c.jsx)("div",{className:"device-mac",children:"[00-00-00-00-00-00]"})]})]})]}),(0,c.jsx)("div",{className:"subtext",children:"Busy connecting your TV... make sure it is switched on and connected to @fibertime"})]})}n(698),n(145);var m=n(3691),u=n.n(m);function h(e){let{deviceId:s}=e,[n,t]=(0,i.useState)(29),[a,r]=(0,i.useState)(23),[o,l]=(0,i.useState)(0),[m,h]=(0,i.useState)("3:34pm DD/MM/YYY"),[p,v]=(0,i.useState)("00-00-00-00-00");return(0,i.useEffect)(()=>{d.A.connectDevice(s).then(e=>{e.success&&(h(u()(e.bundle.expiry).format("HH:mma DD/MM/YYYY")),v(e.device.mac_address),setInterval(()=>{let s=u()(),n=u()(e.bundle.expiry),c=n.diff(s,"days"),i=n.subtract(c,"days").diff(s,"hours"),a=Math.trunc(s.seconds()/n.seconds()*100);t(c),r(i),l(a)},1e3))})}),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"heading",children:"Connected!"}),(0,c.jsxs)("div",{className:"progress-container",children:[(0,c.jsx)("img",{className:"p-icon",src:"/tvi.png"}),(0,c.jsx)("img",{className:"p-icon",src:"/more-check.png?1"}),(0,c.jsx)("img",{className:"p-icon",src:"/wi-fi-icon.png"}),(0,c.jsx)("img",{className:"p-icon",src:"/more-check.png?1"}),(0,c.jsx)("img",{className:"p-icon",src:"/internet.png"})]}),(0,c.jsxs)("div",{className:"bundle-container",children:[(0,c.jsxs)("div",{className:"bundle-info",children:[(0,c.jsx)("img",{className:"icon",src:"/wi-fi-icon.png"}),(0,c.jsx)("div",{className:"devices",children:"1"}),(0,c.jsx)("img",{className:"devices-icon",src:"/tvi.png"}),(0,c.jsx)("div",{className:"product-name",children:"30 days"})]}),(0,c.jsxs)("div",{className:"device-card",children:[(0,c.jsx)("img",{className:"device-icon",src:"/tvi.png"}),(0,c.jsxs)("div",{className:"device-details",children:[(0,c.jsx)("div",{className:"device-name",children:"Device"}),(0,c.jsxs)("div",{className:"device-mac",children:["[",p,"]"]})]})]}),(0,c.jsxs)("div",{className:"container-expiration",children:[(0,c.jsxs)("div",{className:"expiration-days",children:[n," days ",a," hours..."]}),(0,c.jsxs)("div",{className:"expiration-time",children:[(0,c.jsx)("span",{children:"expires at"})," ",m]}),(0,c.jsxs)("div",{className:"expiration-bar",children:[(0,c.jsx)("div",{className:"fill",style:{width:"".concat(o,"%")}}),(0,c.jsx)("span",{className:"dot"})]})]})]}),(0,c.jsx)("div",{className:"subtext",children:"Check your active bundles by WhatsApping us on 000 000 0000"})]})}function p(){let[e,s]=(0,i.useState)("login"),[n,t]=(0,i.useState)(""),[d,m]=(0,i.useState)("");switch(e){default:case"login":return(0,c.jsx)(a,{setPage:e=>s(e),setCellNumber:e=>t(e)});case"otp":return(0,c.jsx)(r,{setPage:e=>s(e),cellNumber:n});case"tv-code":return(0,c.jsx)(o,{setPage:e=>s(e),setDeviceId:e=>m(e)});case"connecting":return(0,c.jsx)(l,{setPage:e=>s(e),deviceId:d});case"connected":return(0,c.jsx)(h,{deviceId:d})}}},4412:(e,s,n)=>{"use strict";n.d(s,{A:()=>c});let c={createDeviceCode:function(e){return new Promise(s=>{fetch("api/device/create-device-code",{method:"post",headers:[["Content-Type","application/json"]],body:JSON.stringify({mac_address:e})}).then(e=>{e.json().then(e=>{s(e)})})})},getDevice:function(e){return new Promise(s=>{fetch("api/device/device?device-code=".concat(e),{method:"get",headers:[["Content-Type","application/json"],["Authorization","Bearer ".concat(localStorage.getItem("token"))]]}).then(e=>{e.json().then(e=>{s(e)})})})},connectDevice:function(e){return new Promise(s=>{fetch("api/device/connect-device",{method:"post",headers:[["Content-Type","application/json"],["Authorization","Bearer ".concat(localStorage.getItem("token"))]],body:JSON.stringify({"device-id":e})}).then(e=>{e.json().then(e=>{s(e)})})})},deviceStatus:function(e){return new Promise(s=>{fetch("api/device/device?device-id=".concat(e),{method:"get",headers:[["Content-Type","application/json"],["Authorization","Bearer ".concat(localStorage.getItem("token"))]]}).then(e=>{e.json().then(e=>{s(e)})})})}}},145:()=>{},698:()=>{},6563:()=>{},4071:()=>{},7984:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[574,586,441,517,358],()=>s(5491)),_N_E=e.O()}]);